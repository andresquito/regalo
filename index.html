<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pack de Camisetas</title>

  <link rel="stylesheet" href="styles.css">

  <!-- Leaflet (Mapa) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>

<body>

<div class="container">
  <div class="main">

    <!-- IM√ÅGENES -->
    <div class="img-section">
      <div class="main-img">
        <img id="mainImg" src="imagenes/blanco.png">
      </div>

      <div class="thumbs">
        <img src="imagenes/blanco.png" onclick="cambiarImagen(this)">
        <img src="imagenes/negro.png" onclick="cambiarImagen(this)">
        <img src="imagenes/vino.png" onclick="cambiarImagen(this)">
        <img src="imagenes/turquesa.png" onclick="cambiarImagen(this)">
      </div>
    </div>

    <!-- DATOS -->
    <div class="details">

      <div class="title">Pack de 3 Camisetas</div>
      <div class="price">$19<span class="cents">.99</span></div>

      <div class="pedido">Realiza tu pedido</div>

      <!-- TALLA -->
      <label>Talla</label>
      <div class="tallas">
        <button type="button" class="talla-btn" onclick="seleccionarTalla(this,'S')">Peque√±a</button>
        <button type="button" class="talla-btn" onclick="seleccionarTalla(this,'M')">Mediana</button>
        <button type="button" class="talla-btn" onclick="seleccionarTalla(this,'L')">Grande</button>
      </div>
      <input type="hidden" id="talla">

      <!-- COLORES -->
      <label>Colores del pack</label>
      <div class="colores-pack">
        <select id="c1" class="color-select" onchange="cambiarEstiloColor(this)">
          <option value="">Color 1</option>
          <option value="Blanco" data-color="#ffffff">Blanco</option>
          <option value="Negro" data-color="#000000">Negro</option>
          <option value="Vino" data-color="#6b1b1b">Vino</option>
          <option value="Turquesa" data-color="#2bbec3">Turquesa</option>
        </select>

        <select id="c2" class="color-select" onchange="cambiarEstiloColor(this)">
          <option value="">Color 2</option>
          <option value="Blanco" data-color="#ffffff">Blanco</option>
          <option value="Negro" data-color="#000000">Negro</option>
          <option value="Vino" data-color="#6b1b1b">Vino</option>
          <option value="Turquesa" data-color="#2bbec3">Turquesa</option>
        </select>

        <select id="c3" class="color-select" onchange="cambiarEstiloColor(this)">
          <option value="">Color 3</option>
          <option value="Blanco" data-color="#ffffff">Blanco</option>
          <option value="Negro" data-color="#000000">Negro</option>
          <option value="Vino" data-color="#6b1b1b">Vino</option>
          <option value="Turquesa" data-color="#2bbec3">Turquesa</option>
        </select>
      </div>

      <!-- FECHA Y HORA -->
      <label>Fecha de entrega</label>
      <input type="date" id="fecha">

      <label>Hora de entrega</label>
      <input type="time" id="hora">

      <!-- MAPA -->
      <label>Ubicaci√≥n de entrega</label>
      <div id="map"></div>
      <input type="hidden" id="ubicacion">
      <div id="ubicacionStatus">üìç Selecciona la ubicaci√≥n en el mapa</div>

      <!-- BOT√ìN -->
      <button onclick="enviar()">Enviar pedido por WhatsApp</button>

    </div>
  </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* Imagen */
function cambiarImagen(img) {
  document.getElementById('mainImg').src = img.src;
}

/* Talla */
function seleccionarTalla(btn, valor) {
  document.querySelectorAll('.talla-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('talla').value = valor;
}

/* Colores */
function cambiarEstiloColor(select) {
  const opt = select.options[select.selectedIndex];
  const color = opt.dataset.color;
  if (!color) return;

  select.style.backgroundColor = color;
  select.style.border = '2px solid ' + color;

  if (color === '#000000' || color === '#6b1b1b') {
    select.style.color = '#fff';
  } else {
    select.style.color = '#000';
  }
}

/* MAPA */
let map = L.map('map').setView([-0.18, -78.47], 14);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
let marker;

map.on('click', e => {
  if (!marker) marker = L.marker(e.latlng).addTo(map);
  else marker.setLatLng(e.latlng);

  const link = `https://maps.google.com/?q=${e.latlng.lat},${e.latlng.lng}`;
  document.getElementById('ubicacion').value = link;
  document.getElementById('ubicacionStatus').innerText = '‚úÖ Ubicaci√≥n seleccionada';
});

/* VALIDACI√ìN COMPLETA */
function enviar() {
  let faltantes = [];

  if (!talla.value) faltantes.push('talla');
  if (!c1.value || !c2.value || !c3.value) faltantes.push('los 3 colores');
  if (!fecha.value) faltantes.push('fecha de entrega');
  if (!hora.value) faltantes.push('hora de entrega');
  if (!ubicacion.value) faltantes.push('ubicaci√≥n');

  if (faltantes.length > 0) {
    alert('‚ùå Falta seleccionar:\n- ' + faltantes.join('\n- '));
    return;
  }

  const msg =
    `Pedido Pack Camisetas%0A` +
    `Talla: ${talla.value}%0A` +
    `Colores: ${c1.value}, ${c2.value}, ${c3.value}%0A` +
    `Fecha: ${fecha.value}%0A` +
    `Hora: ${hora.value}%0A` +
    `Ubicaci√≥n: ${ubicacion.value}`;

  window.open(`https://wa.me/593987259001?text=${msg}`, '_blank');
}
</script>

</body>
</html>





